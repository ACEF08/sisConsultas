
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Usuario - Sistema de Consultas</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link href="globals.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="min-h-screen bg-background font-body antialiased">

    <div class="flex min-h-screen w-full flex-col bg-muted/40">
        <!-- Header -->
        <header class="sticky top-0 z-40 flex h-16 shrink-0 items-center justify-between gap-4 border-b bg-primary-pattern px-4 text-primary-foreground shadow-md backdrop-blur-sm md:px-6">
            <div class="flex items-center gap-4">
                <img alt="Logo DIRIS Viceministerio" loading="lazy" width="200" height="35" decoding="async" class="hidden md:block" src="https://i.ibb.co/yn5DsfL2/Logo-DIRIS-Viceministerio-png.png">
            </div>
            <div class="hidden md:flex flex-1 justify-center items-center overflow-hidden">
                <h1 class="text-lg font-headline tracking-wider truncate">SISTEMA DE GESTION DE CONSULTAS TECNICAS OACEF-DMID-DIRIS/LS</h1>
            </div>
            <div class="flex items-center gap-4">
                <button id="logout-button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-current bg-transparent text-inherit hover:bg-white/10 h-10 px-4 py-2">
                    Salir
                </button>
                <a class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2" href="admin-login.html">
                    Acceso Personal
                </a>
            </div>
        </header>

        <!-- Main -->
        <main class="flex flex-1 flex-col items-center justify-center p-4 md:p-8">
            <div class="w-full max-w-7xl">
                <div class="w-full space-y-8">

                    <!-- Bienvenida -->
                    <div class="flex items-start gap-4">
                        <div class="flex h-12 w-12 items-center justify-center rounded-full bg-primary-pattern">
                            <i data-lucide="user" class="h-6 w-6 text-primary-foreground"></i>
                        </div>
                        <div>
                            <h1 id="user-welcome" class="text-2xl font-bold font-headline tracking-tight">Cargando...</h1>
                            <p class="text-muted-foreground">Aquí puede registrar nuevas consultas o revisar el historial de las existentes.</p>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="w-full">
                        <div role="tablist" aria-orientation="horizontal" class="h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-2">
                            <button id="tab-new" type="button" role="tab" data-state="inactive"
                                class="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm">
                                <i data-lucide="file-plus-2" class="mr-2 h-4 w-4"></i>
                                Registrar Nueva Consulta
                            </button>
                            <button id="tab-history" type="button" role="tab" data-state="active"
                                class="inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm">
                                <i data-lucide="history" class="mr-2 h-4 w-4"></i>
                                Historial de Consultas
                            </button>
                        </div>
                    </div>

                    <!-- Nueva Consulta -->
                    <div id="content-new" class="mt-6 hidden">
                        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
                            <div class="flex flex-col space-y-1.5 p-6">
                                <h3 class="text-2xl font-semibold leading-none tracking-tight">Registrar Nueva Consulta</h3>
                                <p class="text-sm text-muted-foreground">Complete el siguiente formulario. Los campos con  son obligatorios.</p>
                            </div>
                            <form id="new-query-form" class="p-6 pt-0 space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="space-y-2">
                                        <label for="nombre-establecimiento">Nombre del Establecimiento </label>
                                        <input id="nombre-establecimiento" required placeholder="Ej: Botica Mi Salud" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                    </div>
                                    <div class="space-y-2">
                                        <label for="email-establecimiento">Email del Establecimiento </label>
                                        <input id="email-establecimiento" type="email" required placeholder="contacto@establecimiento.com" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                    </div>
                                    <div class="space-y-2">
                                        <label for="ruc">RUC </label>
                                        <input id="ruc" placeholder="Ej: 20123456789" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                    </div>
                                    <div class="space-y-2">
                                        <label for="codigo-establecimiento">Código de Establecimiento (Opcional)</label>
                                        <input id="codigo-establecimiento" placeholder="Ej: 12345" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                    </div>
                                    <div class="space-y-2">
                                        <label for="expediente">N° de Expediente </label>
                                        <input id="expediente" required placeholder="Ej: 25-018523-001" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                    </div>
                                    <div class="space-y-2">
                                        <label for="cargo">Su Cargo en el Establecimiento </label>
                                        <select id="cargo" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                            <option value="" disabled selected>Seleccione su cargo</option>
                                            <option value="Propietario">Propietario</option>
                                            <option value="Representante Legal">Representante Legal</option>
                                            <option value="Director Técnico">Director Técnico</option>
                                            <option value="Q.F. Asistente">Q.F. Asistente</option>
                                            <!-- <option value="Otros">Otros</option> -->
                                            
                                        </select>
                                        <input type="text" id="cargo-otro" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm mt-2 hidden" placeholder="Especifique su cargo">
                                    </div>
                                </div>

                                <div class="space-y-2">
                                    <label for="tema">Tema de la Consulta </label>
                                    <select id="tema" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm">
                                        <option value="" disabled selected>Seleccione el tema</option>
                                        <option value="SEGUIMIENTO DE EXPEDIENTE">SEGUIMIENTO DE EXPEDIENTE</option>
                                        <option value="CONSULTA POR SUBSANACIÓN DE OBSERVACIONES CON OFICIO">CONSULTA POR SUBSANACIÓN DE OBSERVACIONES CON OFICIO</option>
                                        <option value="CONSULTA PARA APERTURA DE BOTICA">CONSULTA PARA APERTURA DE BOTICA</option>
                                        <option value="CONSULTA DE LLENADO DE FORMATOS TUPA">CONSULTA DE LLENADO DE FORMATOS TUPA</option>
                                        <option value="CONSULTA DE LLENADO DE FORMATOS NO TUPA">CONSULTA DE LLENADO DE FORMATOS NO TUPA</option>
                                        <option value="CONSULTA TÉCNICA DE CROQUIS DEL EE.FF">CONSULTA TÉCNICA DE CROQUIS DEL EE.FF</option>
                                        <option value="CONSULTA DEL OBSERVATORIO DE PRECIOS">CONSULTA DEL OBSERVATORIO DE PRECIOS</option>
                                        <option value="CONSULTA POR OFICIO DE COMUNICACIÓN">CONSULTA POR OFICIO DE COMUNICACIÓN</option>
                                        <option value="CONSULTA EN QUÉ ESTADO SE ENCUENTRA MI EXPEDIENTE">CONSULTA EN QUÉ ESTADO SE ENCUENTRA MI EXPEDIENTE</option>
                                        <option value="Otros">Otros</option>
                                    </select>
                                    <input type="text" id="tema-otro" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm mt-2 hidden" placeholder="Especifique el tema">
                                </div>

                                <div id="detalle-container" class="space-y-2 hidden">
                                    <label for="detalle">Descripción de la Consulta </label>
                                    <textarea id="detalle" rows="5" class="w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none" placeholder="Detalle aquí su consulta..."></textarea>
                                </div>

                                <div class="flex justify-end pt-4">
                                    <button type="submit" class="inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-6 py-2">
                                        <i data-lucide="send" class="h-4 w-4"></i>
                                        Enviar Consulta
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Historial -->
                    <div id="content-history" class="mt-6">
                        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
                            <div class="flex flex-col space-y-1.5 p-6">
                                <h3 class="text-2xl font-semibold leading-none tracking-tight">Historial de Consultas</h3>
                                <p class="text-sm text-muted-foreground">A continuación se muestran todas las consultas que ha realizado.</p>
                            </div>
                            <div id="history-accordion" class="p-6 pt-0">
                                <p class="text-center text-muted-foreground">Cargando historial...</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="flex items-center justify-center p-4 text-sm text-muted-foreground">
            © 2026 OACEF-DMID. Todos los derechos reservados.
        </footer>
    </div>

    <!-- Toast container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <!-- Scripts -->
    <script type="module" src="./dashboard.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>
</html>
