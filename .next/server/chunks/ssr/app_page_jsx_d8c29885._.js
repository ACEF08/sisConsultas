module.exports=[1348,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(95245),e=a.i(59501),f=a.i(54714),g=a.i(11216),h=a.i(7252),i=a.i(67195),j=a.i(88155),k=a.i(96221),l=a.i(70106);let m=(0,l.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var n=a.i(71987);let o=f.object({dni:f.string().regex(/^[0-9]{8}$/,"El DNI debe contener 8 dígitos numéricos.")});function p({onSubmit:a,isLoading:c}){let f=(0,d.useForm)({resolver:(0,e.zodResolver)(o),defaultValues:{dni:""}});return(0,b.jsx)(j.Card,{className:"w-full max-w-lg mx-auto bg-[#1E3A8A] border-4 border-white shadow-2xl text-white rounded-2xl",children:(0,b.jsxs)(j.CardContent,{className:"p-8 md:p-12",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,b.jsx)(n.default,{src:"https://i.ibb.co/jZ0wJZt/escudo-peru.png",alt:"Escudo de Perú",width:80,height:80,className:"mb-4"}),(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Portal de Consultas"}),(0,b.jsx)("p",{className:"text-gray-300 mt-2 max-w-sm",children:"Ingrese su DNI para registrar una nueva consulta o ver el estado de sus consultas existentes."})]}),(0,b.jsx)(h.Form,{...f,children:(0,b.jsxs)("form",{onSubmit:f.handleSubmit(function(b){a(b.dni)}),className:"space-y-6",children:[(0,b.jsx)(h.FormField,{control:f.control,name:"dni",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Número de DNI"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"Ej: 12345678",...a,className:"bg-white text-gray-900 text-lg p-6 rounded-md focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#1E3A8A] focus:ring-white transition"})}),(0,b.jsx)(h.FormMessage,{className:"text-amber-300"})]})}),(0,b.jsxs)(g.Button,{type:"submit",disabled:c,className:"w-full bg-white text-[#1E3A8A] text-lg font-bold p-7 rounded-md hover:bg-gray-200 transition-transform transform hover:scale-105 shadow-lg",children:[c?(0,b.jsx)(k.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):(0,b.jsx)(m,{className:"mr-2 h-5 w-5"}),"Validar DNI"]})]})}),(0,b.jsx)("div",{className:"mt-8 text-center",children:(0,b.jsx)("p",{className:"text-xs text-gray-400 max-w-xs mx-auto",children:"Toda la información proporcionada tiene carácter de declaración jurada y está sujeta a fiscalización posterior."})})]})})}var q=a.i(70121),r=a.i(7554),s=a.i(25152),t=a.i(77994),u=a.i(3688),v=a.i(77192);a.i(35112);var w=Symbol("radix.slottable");function x(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===w}var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{var e,f;let g,h,i,j=(f=e=`Primitive.${d}`,(g=c.forwardRef((a,b)=>{let{children:d,...e}=a;if(c.isValidElement(d)){var f;let a,g,h=(f=d,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(e,d.props);return d.type!==c.Fragment&&(i.ref=b?(0,q.composeRefs)(b,h):h),c.cloneElement(d,i)}return c.Children.count(d)>1?c.Children.only(null):null})).displayName=`${f}.SlotClone`,h=g,(i=c.forwardRef((a,d)=>{let{children:e,...f}=a,g=c.Children.toArray(e),i=g.find(x);if(i){let a=i.props.children,e=g.map(b=>b!==i?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(h,{...f,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(h,{...f,ref:d,children:e})})).displayName=`${e}.Slot`,i),k=c.forwardRef((a,c)=>{let{asChild:e,...f}=a;return(0,b.jsx)(e?j:d,{...f,ref:c})});return k.displayName=`Primitive.${d}`,{...a,[d]:k}},{}),z="Checkbox",[A,B]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(z),[C,D]=A(z);function E(a){let{__scopeCheckbox:d,checked:e,children:f,defaultChecked:g,disabled:h,form:i,name:j,onCheckedChange:k,required:l,value:m="on",internal_do_not_use_render:n}=a,[o,p]=(0,s.useControllableState)({prop:e,defaultProp:g??!1,onChange:k,caller:z}),[q,r]=c.useState(null),[t,u]=c.useState(null),v=c.useRef(!1),w=!q||!!i||!!q.closest("form"),x={checked:o,disabled:h,setChecked:p,control:q,setControl:r,name:j,form:i,value:m,hasConsumerStoppedPropagationRef:v,required:l,defaultChecked:!M(g)&&g,isFormControl:w,bubbleInput:t,setBubbleInput:u};return(0,b.jsx)(C,{scope:d,...x,children:"function"==typeof n?n(x):f})}var F="CheckboxTrigger",G=c.forwardRef(({__scopeCheckbox:a,onKeyDown:d,onClick:e,...f},g)=>{let{control:h,value:i,disabled:j,checked:k,required:l,setControl:m,setChecked:n,hasConsumerStoppedPropagationRef:o,isFormControl:p,bubbleInput:s}=D(F,a),t=(0,q.useComposedRefs)(g,m),u=c.useRef(k);return c.useEffect(()=>{let a=h?.form;if(a){let b=()=>n(u.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[h,n]),(0,b.jsx)(y.button,{type:"button",role:"checkbox","aria-checked":M(k)?"mixed":k,"aria-required":l,"data-state":N(k),"data-disabled":j?"":void 0,disabled:j,value:i,...f,ref:t,onKeyDown:(0,r.composeEventHandlers)(d,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,r.composeEventHandlers)(e,a=>{n(a=>!!M(a)||!a),s&&p&&(o.current=a.isPropagationStopped(),o.current||a.stopPropagation())})})});G.displayName=F;var H=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(E,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(L,{__scopeCheckbox:d})]})})});H.displayName=z;var I="CheckboxIndicator",J=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=D(I,d);return(0,b.jsx)(v.Presence,{present:e||M(g.checked)||!0===g.checked,children:(0,b.jsx)(y.span,{"data-state":N(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});J.displayName=I;var K="CheckboxBubbleInput",L=c.forwardRef(({__scopeCheckbox:a,...d},e)=>{let{control:f,hasConsumerStoppedPropagationRef:g,checked:h,defaultChecked:i,required:j,disabled:k,name:l,value:m,form:n,bubbleInput:o,setBubbleInput:p}=D(K,a),r=(0,q.useComposedRefs)(e,p),s=(0,t.usePrevious)(h),v=(0,u.useSize)(f);c.useEffect(()=>{if(!o)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!g.current;if(s!==h&&a){let c=new Event("click",{bubbles:b});o.indeterminate=M(h),a.call(o,!M(h)&&h),o.dispatchEvent(c)}},[o,s,h,g]);let w=c.useRef(!M(h)&&h);return(0,b.jsx)(y.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,required:j,disabled:k,name:l,value:m,form:n,...d,tabIndex:-1,ref:r,style:{...d.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function M(a){return"indeterminate"===a}function N(a){return M(a)?"indeterminate":a?"checked":"unchecked"}L.displayName=K;var O=a.i(33441),P=a.i(77860);let Q=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(H,{ref:d,className:(0,P.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary bg-input ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...c,children:(0,b.jsx)(J,{className:(0,P.cn)("flex items-center justify-center text-current"),children:(0,b.jsx)(O.Check,{className:"h-4 w-4"})})}));Q.displayName=H.displayName;let R=(0,l.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),S=f.object({nombres:f.string().min(3,"El nombre debe tener al menos 3 caracteres."),apellidos:f.string().min(3,"El apellido debe tener al menos 3 caracteres."),email:f.string().email("Debe ser un correo electrónico válido."),celular:f.string().regex(/^[0-9]{9}$/,"El número de celular debe tener 9 dígitos."),autorizaNotificaciones:f.boolean().default(!0)});function T({dni:a,onSubmit:c,isLoading:f}){let l=(0,d.useForm)({resolver:(0,e.zodResolver)(S),defaultValues:{nombres:"",apellidos:"",email:"",celular:"",autorizaNotificaciones:!0}});return(0,b.jsxs)(j.Card,{className:"w-full max-w-3xl mx-auto shadow-2xl rounded-2xl border-t-8 border-[#1E3A8A]",children:[(0,b.jsxs)(j.CardHeader,{className:"text-center p-8",children:[(0,b.jsx)(R,{className:"mx-auto h-12 w-12 text-[#1E3A8A]"}),(0,b.jsx)(j.CardTitle,{className:"text-3xl font-bold text-gray-800 mt-4",children:"Complete su Registro"}),(0,b.jsx)(j.CardDescription,{className:"text-lg text-gray-600 mt-2",children:"Su DNI no fue encontrado. Por favor, complete sus datos para crear una cuenta."})]}),(0,b.jsx)(j.CardContent,{className:"p-8",children:(0,b.jsx)(h.Form,{...l,children:(0,b.jsxs)("form",{onSubmit:l.handleSubmit(c),className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.FormLabel,{className:"text-lg text-gray-700",children:"DNI"}),(0,b.jsx)(i.Input,{value:a,disabled:!0,className:"bg-gray-100 text-lg p-6 rounded-md"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsx)(h.FormField,{control:l.control,name:"nombres",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg text-gray-700",children:"Nombres"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"Escriba sus nombres",...a,className:"text-lg p-6 rounded-md"})}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)(h.FormField,{control:l.control,name:"apellidos",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg text-gray-700",children:"Apellidos"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"Escriba sus apellidos",...a,className:"text-lg p-6 rounded-md"})}),(0,b.jsx)(h.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsx)(h.FormField,{control:l.control,name:"email",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg text-gray-700",children:"Correo Electrónico"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{type:"email",placeholder:"su.correo@ejemplo.com",...a,className:"text-lg p-6 rounded-md"})}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)(h.FormField,{control:l.control,name:"celular",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg text-gray-700",children:"Celular"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"987654321",...a,className:"text-lg p-6 rounded-md"})}),(0,b.jsx)(h.FormMessage,{})]})})]}),(0,b.jsx)(h.FormField,{control:l.control,name:"autorizaNotificaciones",render:({field:a})=>(0,b.jsxs)(h.FormItem,{className:"flex flex-row items-center space-x-3 space-y-0 rounded-lg border bg-gray-50 p-6 shadow-sm",children:[(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(Q,{checked:a.value,onCheckedChange:a.onChange,id:"autorizacion",className:"h-5 w-5"})}),(0,b.jsx)("div",{className:"space-y-1 leading-none",children:(0,b.jsx)(h.FormLabel,{htmlFor:"autorizacion",className:"text-base text-gray-700 cursor-pointer",children:"Autorizo recibir notificaciones por correo y/o SMS sobre el estado de mis consultas."})})]})}),(0,b.jsxs)(g.Button,{type:"submit",disabled:f,className:"w-full bg-[#1E3A8A] text-white text-lg font-bold p-7 rounded-md hover:bg-[#162B65] transition-transform transform hover:scale-105 shadow-lg",children:[f?(0,b.jsx)(k.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):(0,b.jsx)(R,{className:"mr-2 h-5 w-5"}),"Crear mi Cuenta"]})]})})})]})}var U=a.i(59138),V=a.i(37464);let W=(0,l.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),X=["SEGUIMIENTO DE EXPEDIENTE","CONSULTA POR SUBSANACIÓN DE OBSERVACIONES CON OFICIO","CONSULTA PARA APERTURA DE BOTICA","CONSULTA DE LLENADO DE FORMATOS TUPA","CONSULTA DE LLENADO DE FORMATOS NO TUPA","CONSULTA TÉCNICA DE CROQUIS DEL EE.FF","CONSULTA DEL OBSERVATORIO DE PRECIOS","CONSULTA POR OFICIO DE COMUNICACIÓN","CONSULTA EN QUÉ ESTADO SE ENCUENTRA MI EXPEDIENTE","OTROS"],Y=["Propietario","Representante Legal","Director Técnico","Q.F. Asistente","Otros"],Z=f.object({nombreEstablecimiento:f.string().min(3,"El nombre es requerido."),codigoEstablecimiento:f.string().optional(),ruc:f.string().optional(),emailEstablecimiento:f.string().email("Debe ser un correo válido."),cargo:f.enum(Y,{required_error:"Debe seleccionar un cargo."}),tema:f.enum(X,{required_error:"Debe seleccionar un tema."}),descripcion:f.string().min(10,"La descripción debe tener al menos 10 caracteres.")});function $({onNewQuery:a,onQuerySuccess:f}){let[j,l]=c.useState(!1),m=(0,d.useForm)({resolver:(0,e.zodResolver)(Z),defaultValues:{nombreEstablecimiento:"",codigoEstablecimiento:"",ruc:"",emailEstablecimiento:"",cargo:void 0,tema:void 0,descripcion:""}});async function n(b){l(!0);let c=await a(b);l(!1),c&&(m.reset(),f(!0))}return(0,b.jsx)(h.Form,{...m,children:(0,b.jsxs)("form",{onSubmit:m.handleSubmit(n),className:"p-2 space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-12 gap-y-8",children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(h.FormField,{control:m.control,name:"nombreEstablecimiento",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Nombre del Establecimiento"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"Ej: Botica Salud Total",...a,className:"text-lg p-6"})}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)(h.FormField,{control:m.control,name:"ruc",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"RUC (Opcional)"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"Ej: 20123456789",...a,className:"text-lg p-6"})}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)(h.FormField,{control:m.control,name:"codigoEstablecimiento",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Código de Establecimiento (Opcional)"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"Ej: 12345",...a,className:"text-lg p-6"})}),(0,b.jsx)(h.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(h.FormField,{control:m.control,name:"emailEstablecimiento",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Email del Establecimiento"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{type:"email",placeholder:"contacto@saludtotal.com",...a,className:"text-lg p-6"})}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)(h.FormField,{control:m.control,name:"cargo",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Cargo que ocupa"}),(0,b.jsxs)(U.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(U.SelectTrigger,{className:"text-lg p-6",children:(0,b.jsx)(U.SelectValue,{placeholder:"Seleccione su cargo"})})}),(0,b.jsx)(U.SelectContent,{children:Y.map(a=>(0,b.jsx)(U.SelectItem,{value:a,className:"text-lg",children:a},a))})]}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)(h.FormField,{control:m.control,name:"tema",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Tema de la Consulta"}),(0,b.jsxs)(U.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(U.SelectTrigger,{className:"text-lg p-6",children:(0,b.jsx)(U.SelectValue,{placeholder:"Seleccione un tema"})})}),(0,b.jsx)(U.SelectContent,{children:X.map(a=>(0,b.jsx)(U.SelectItem,{value:a,className:"text-lg",children:a},a))})]}),(0,b.jsx)(h.FormMessage,{})]})})]})]}),(0,b.jsx)(h.FormField,{control:m.control,name:"descripcion",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-lg",children:"Descripción Detallada"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(V.Textarea,{placeholder:"Describa su consulta con el mayor detalle posible...",className:"resize-y text-lg p-6",rows:6,...a})}),(0,b.jsx)(h.FormDescription,{className:"text-base",children:"Sea claro y conciso para una respuesta más rápida."}),(0,b.jsx)(h.FormMessage,{})]})}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsxs)(g.Button,{type:"submit",disabled:j,className:"bg-[#1E3A8A] text-white text-lg font-bold py-7 px-10 rounded-lg hover:bg-[#162B65] transition-transform transform hover:scale-105 shadow-lg",children:[j?(0,b.jsx)(k.Loader2,{className:"mr-3 h-6 w-6 animate-spin"}):(0,b.jsx)(W,{className:"mr-3 h-6 w-6"}),"Enviar Consulta"]})})]})})}a.i(69387);var _=a.i(60574),aa=a.i(13849),ab=a.i(34056),ac=a.i(84019),ad=a.i(13846);let ae=(0,l.default)("message-square-x",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"m14.5 8.5-5 5",key:"19tnj2"}],["path",{d:"m9.5 8.5 5 5",key:"1oa8ql"}]]);function af(){return(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsx)(ad.Skeleton,{className:"h-8 w-full mb-4"}),(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(ad.Skeleton,{className:"h-6 w-1/4"}),(0,b.jsx)(ad.Skeleton,{className:"h-6 w-1/4"}),(0,b.jsx)(ad.Skeleton,{className:"h-6 w-1/4"}),(0,b.jsx)(ad.Skeleton,{className:"h-8 w-24 rounded-full"})]},c))})]})}function ag(){return(0,b.jsxs)("div",{className:"text-center p-12 border-2 border-dashed rounded-lg bg-gray-50",children:[(0,b.jsx)(ae,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-4 text-2xl font-semibold text-gray-700",children:"No hay consultas todavía"}),(0,b.jsx)("p",{className:"mt-2 text-base text-gray-500",children:'Cuando realice una nueva consulta, aparecerá aquí. ¡Empiece en la pestaña "Nueva Consulta"!'})]})}function ah({userId:a}){let d=(0,aa.useFirestore)(),[e,f]=c.useState([]),[g,h]=c.useState(!0);return(c.useEffect(()=>{if(!d||!a)return;let b=(0,_.query)((0,_.collection)(d,"queries"),(0,_.where)("userId","==",a),(0,_.orderBy)("fechaCreacion","desc")),c=(0,_.onSnapshot)(b,a=>{f(a.docs.map(a=>({id:a.id,...a.data()}))),h(!1)},a=>{console.error("Error al obtener el historial de consultas: ",a),h(!1)});return()=>c()},[d,a]),g)?(0,b.jsx)(af,{}):0===e.length?(0,b.jsx)(ag,{}):(0,b.jsx)("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:(0,b.jsxs)(ab.Table,{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)(ab.TableHeader,{className:"bg-gray-50",children:(0,b.jsxs)(ab.TableRow,{children:[(0,b.jsx)(ab.TableHead,{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"N° Expediente"}),(0,b.jsx)(ab.TableHead,{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Tema"}),(0,b.jsx)(ab.TableHead,{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha"}),(0,b.jsx)(ab.TableHead,{className:"px-6 py-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"})]})}),(0,b.jsx)(ab.TableBody,{className:"bg-white divide-y divide-gray-200",children:e.map(a=>(0,b.jsxs)(ab.TableRow,{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)(ab.TableCell,{className:"px-6 py-5 whitespace-nowrap text-lg font-medium text-gray-800",children:a.expediente}),(0,b.jsx)(ab.TableCell,{className:"px-6 py-5 whitespace-nowrap text-base text-gray-600",children:a.tema}),(0,b.jsx)(ab.TableCell,{className:"px-6 py-5 whitespace-nowrap text-base text-gray-600",children:new Date(a.fechaCreacion).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}),(0,b.jsx)(ab.TableCell,{className:"px-6 py-5 whitespace-nowrap text-center",children:(0,b.jsx)(ac.Badge,{style:(0,P.getStatusStyles)(a.status),className:"px-4 py-2 text-sm font-bold rounded-full shadow-md",children:a.status})})]},a.id))})]})})}var ai=a.i(42418);let aj=(0,l.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ak=(0,l.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),al=(0,l.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function am({user:a,onNewQuery:d}){let[e,f]=c.useState("history");return(0,b.jsxs)("div",{className:"w-full max-w-6xl mx-auto space-y-8 my-8",children:[(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"inline-block bg-gray-100 p-4 rounded-full border-4 border-white shadow-md",children:(0,b.jsx)(aj,{className:"h-16 w-16 text-gray-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-4xl font-bold text-gray-800",children:["Bienvenido, ",(0,b.jsxs)("span",{className:"text-[#1E3A8A]",children:[a.nombres," ",a.apellidos]})]}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mt-2",children:"Desde aquí puede gestionar sus consultas técnicas de manera fácil y rápida."})]})]}),(0,b.jsxs)(ai.Tabs,{value:e,onValueChange:f,className:"w-full",children:[(0,b.jsxs)(ai.TabsList,{className:"grid w-full grid-cols-2 h-auto p-2 bg-gray-200 rounded-lg gap-2",children:[(0,b.jsxs)(ai.TabsTrigger,{value:"history",className:"text-lg font-semibold py-4 rounded-md transition-all duration-300 data-[state=active]:bg-[#1E3A8A] data-[state=active]:text-white data-[state=active]:shadow-lg",children:[(0,b.jsx)(ak,{className:"mr-2 h-5 w-5"}),"Historial de Consultas"]}),(0,b.jsxs)(ai.TabsTrigger,{value:"new",className:"text-lg font-semibold py-4 rounded-md transition-all duration-300 data-[state=active]:bg-[#1E3A8A] data-[state=active]:text-white data-[state=active]:shadow-lg",children:[(0,b.jsx)(al,{className:"mr-2 h-5 w-5"}),"Nueva Consulta"]})]}),(0,b.jsxs)("div",{className:"mt-6 border-t-4 border-gray-200 pt-6",children:[(0,b.jsx)(ai.TabsContent,{value:"history",children:(0,b.jsxs)(j.Card,{className:"shadow-xl rounded-2xl",children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{className:"text-2xl font-bold text-gray-800",children:"Su Historial de Consultas"}),(0,b.jsx)(j.CardDescription,{className:"text-base text-gray-600",children:"A continuación se muestran todas las consultas que ha realizado."})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsx)(ah,{userId:a.id})})]})}),(0,b.jsx)(ai.TabsContent,{value:"new",children:(0,b.jsxs)(j.Card,{className:"shadow-xl rounded-2xl",children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{className:"text-2xl font-bold text-gray-800",children:"Registrar Nueva Consulta"}),(0,b.jsx)(j.CardDescription,{className:"text-base text-gray-600",children:"Complete el formulario para enviar una nueva consulta técnica."})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsx)($,{onNewQuery:d,onQuerySuccess:a=>{a&&f("history")}})})]})})]})]})]})}async function an(a,b){let c=(0,_.doc)(a,"users",b),d=await (0,_.getDoc)(c);return d.exists()?{id:d.id,...d.data()}:null}async function ao(a,b,c){let d=(0,_.doc)(a,"users",c);if((await (0,_.getDoc)(d)).exists())throw Error("Ya existe un usuario con este DNI.");return await (0,_.setDoc)(d,b),{id:c,...b}}async function ap(a){let b=(0,_.doc)(a,"counters","queryCounter");try{return await (0,_.runTransaction)(a,async a=>{let c=await a.get(b);if(!c.exists())return a.set(b,{current:1}),1;let d=c.data().current+1;return a.update(b,{current:d}),d})}catch(a){throw console.error("Error en la transacción para obtener el siguiente valor de secuencia:",a),Error("No se pudo generar el número de expediente.")}}async function aq(a,b,c){let d=await ap(a),e=`EXP-${new Date().getFullYear()}-${String(d).padStart(6,"0")}`,f={...b,userId:c,status:"Pendiente",fechaCreacion:new Date().toISOString(),fechaActualizacion:new Date().toISOString(),expediente:e,observacion:"",asignadoA:""},g=(0,_.collection)(a,"queries");return await (0,_.addDoc)(g,f)}var ar=a.i(23292);function as(){let a=(0,aa.useFirestore)(),[d,e]=c.useState(null),[f,g]=c.useState(""),[h,i]=c.useState(!1),[j,k]=c.useState(!1),l=async b=>{k(!0),ar.toast.loading("Validando DNI...");try{let c=await an(a,b);c?(e(c),g(c.dni),ar.toast.success("¡Bienvenido de nuevo!")):(g(b),i(!0),ar.toast.info("DNI no encontrado. Por favor, regístrese."))}catch(a){console.error("Error al validar DNI:",a),ar.toast.error("Error al validar el DNI. Inténtelo de nuevo.")}k(!1)},m=async b=>{k(!0),ar.toast.loading("Registrando usuario...");try{let c=await ao(a,b,f);e(c),i(!1),ar.toast.success("¡Registro exitoso! Ya puede realizar consultas.")}catch(a){console.error("Error al registrar usuario:",a),ar.toast.error(a.message||"Error al registrar el usuario. Inténtelo de nuevo.")}k(!1)},n=async b=>{if(!d)return ar.toast.error("Debe iniciar sesión para crear una consulta."),!1;ar.toast.loading("Enviando su consulta...");try{return await aq(a,b,d.id),ar.toast.success("Su consulta ha sido registrada exitosamente."),!0}catch(a){return console.error("Error al crear la consulta:",a),ar.toast.error("Hubo un error al registrar su consulta."),!1}};return(0,b.jsxs)("div",{className:"w-full max-w-5xl mx-auto py-8",children:[(0,b.jsx)(ar.Toaster,{richColors:!0,position:"top-center"}),!j||d||h?d?(0,b.jsx)(am,{user:d,onNewQuery:n}):h?(0,b.jsx)(T,{dni:f,onSubmit:m,isLoading:j}):(0,b.jsx)(p,{onSubmit:l,isLoading:!1}):(0,b.jsx)(p,{onSubmit:l,isLoading:!0})]})}a.s(["default",()=>as],1348)}];

//# sourceMappingURL=app_page_jsx_d8c29885._.js.map