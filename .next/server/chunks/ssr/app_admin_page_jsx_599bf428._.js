module.exports=[74820,a=>{"use strict";let b,c;var d,e=a.i(87924),f=a.i(72131),g=a.i(50944),h=a.i(27669);a.i(69387);var i=a.i(60574),j=a.i(13849),k=a.i(88155),l=a.i(13846),m=a.i(70106);let n=(0,m.default)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]),o=(0,m.default)("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]),p=(0,m.default)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),q=(0,m.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function r(){let a=(0,j.useFirestore)(),[b,c]=f.useState({total:0,pendientes:0,asignadas:0,atendidas:0}),[d,g]=f.useState(!0);return(f.useEffect(()=>{if(!a)return;let b=(0,i.onSnapshot)((0,i.collection)(a,"queries"),a=>{let b=0,d=0,e=0,f=0;a.forEach(a=>{let c=a.data();switch(b++,c.status){case"Pendiente":d++;break;case"Asignado":e++;break;case"Atendido":f++}}),c({total:b,pendientes:d,asignadas:e,atendidas:f}),g(!1)});return()=>b()},[a]),d)?(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,e.jsx)(l.Skeleton,{className:"h-28"}),(0,e.jsx)(l.Skeleton,{className:"h-28"}),(0,e.jsx)(l.Skeleton,{className:"h-28"}),(0,e.jsx)(l.Skeleton,{className:"h-28"})]}):(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,e.jsx)(s,{icon:(0,e.jsx)(n,{}),title:"Consultas Totales",value:b.total}),(0,e.jsx)(s,{icon:(0,e.jsx)(o,{}),title:"Consultas Pendientes",value:b.pendientes}),(0,e.jsx)(s,{icon:(0,e.jsx)(q,{}),title:"Consultas Asignadas",value:b.asignadas}),(0,e.jsx)(s,{icon:(0,e.jsx)(p,{}),title:"Consultas Atendidas",value:b.atendidas})]})}function s({icon:a,title:b,value:c}){return(0,e.jsxs)(k.Card,{children:[(0,e.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(k.CardTitle,{className:"text-sm font-medium",children:b}),a]}),(0,e.jsx)(k.CardContent,{children:(0,e.jsx)("div",{className:"text-2xl font-bold",children:c})})]})}var t=a.i(34056),u=a.i(84019),v=a.i(77860),w=a.i(67195),x=a.i(42418);let y=(0,m.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var z=a.i(11216),A=a.i(7554),B=a.i(70121),C=a.i(92843),D=a.i(25152),E=a.i(96743),F=a.i(22297),G=a.i(92616),H=a.i(77192);function I(a){var b;let c,d=(b=a,(c=f.forwardRef((a,b)=>{let{children:c,...d}=a;if(f.isValidElement(c)){var e;let a,g,h=(e=c,(g=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(g=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==f.Fragment&&(i.ref=b?(0,B.composeRefs)(b,h):h),f.cloneElement(c,i)}return f.Children.count(c)>1?f.Children.only(null):null})).displayName=`${b}.SlotClone`,c),g=f.forwardRef((a,b)=>{let{children:c,...g}=a,h=f.Children.toArray(c),i=h.find(K);if(i){let a=i.props.children,c=h.map(b=>b!==i?b:f.Children.count(a)>1?f.Children.only(null):f.isValidElement(a)?a.props.children:null);return(0,e.jsx)(d,{...g,ref:b,children:f.isValidElement(a)?f.cloneElement(a,void 0,c):null})}return(0,e.jsx)(d,{...g,ref:b,children:c})});return g.displayName=`${a}.Slot`,g}a.i(35112);var J=Symbol("radix.slottable");function K(a){return f.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===J}var L=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=I(`Primitive.${b}`),d=f.forwardRef((a,d)=>{let{asChild:f,...g}=a;return(0,e.jsx)(f?c:b,{...g,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),M=a.i(86228),N=a.i(52081),O=a.i(41852),P="Dialog",[Q,R]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>f.createContext(a));return function(c){let d=c?.[a]||b;return f.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let g=f.createContext(d),h=c.length;c=[...c,d];let i=b=>{let{scope:c,children:d,...i}=b,j=c?.[a]?.[h]||g,k=f.useMemo(()=>i,Object.values(i));return(0,e.jsx)(j.Provider,{value:k,children:d})};return i.displayName=b+"Provider",[i,function(c,e){let i=e?.[a]?.[h]||g,j=f.useContext(i);if(j)return j;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return f.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(P),[S,T]=Q(P),U=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:g,onOpenChange:h,modal:i=!0}=a,j=f.useRef(null),k=f.useRef(null),[l,m]=(0,D.useControllableState)({prop:d,defaultProp:g??!1,onChange:h,caller:P});return(0,e.jsx)(S,{scope:b,triggerRef:j,contentRef:k,contentId:(0,C.useId)(),titleId:(0,C.useId)(),descriptionId:(0,C.useId)(),open:l,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(a=>!a),[m]),modal:i,children:c})};U.displayName=P;var V="DialogTrigger";f.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,f=T(V,c),g=(0,B.useComposedRefs)(b,f.triggerRef);return(0,e.jsx)(L.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":an(f.open),...d,ref:g,onClick:(0,A.composeEventHandlers)(a.onClick,f.onOpenToggle)})}).displayName=V;var W="DialogPortal",[X,Y]=Q(W,{forceMount:void 0}),Z=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:g}=a,h=T(W,b);return(0,e.jsx)(X,{scope:b,forceMount:c,children:f.Children.map(d,a=>(0,e.jsx)(H.Presence,{present:c||h.open,children:(0,e.jsx)(G.Portal,{asChild:!0,container:g,children:a})}))})};Z.displayName=W;var $="DialogOverlay",_=f.forwardRef((a,b)=>{let c=Y($,a.__scopeDialog),{forceMount:d=c.forceMount,...f}=a,g=T($,a.__scopeDialog);return g.modal?(0,e.jsx)(H.Presence,{present:d||g.open,children:(0,e.jsx)(ab,{...f,ref:b})}):null});_.displayName=$;var aa=I("DialogOverlay.RemoveScroll"),ab=f.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,f=T($,c);return(0,e.jsx)(N.RemoveScroll,{as:aa,allowPinchZoom:!0,shards:[f.contentRef],children:(0,e.jsx)(L.div,{"data-state":an(f.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),ac="DialogContent",ad=f.forwardRef((a,b)=>{let c=Y(ac,a.__scopeDialog),{forceMount:d=c.forceMount,...f}=a,g=T(ac,a.__scopeDialog);return(0,e.jsx)(H.Presence,{present:d||g.open,children:g.modal?(0,e.jsx)(ae,{...f,ref:b}):(0,e.jsx)(af,{...f,ref:b})})});ad.displayName=ac;var ae=f.forwardRef((a,b)=>{let c=T(ac,a.__scopeDialog),d=f.useRef(null),g=(0,B.useComposedRefs)(b,c.contentRef,d);return f.useEffect(()=>{let a=d.current;if(a)return(0,O.hideOthers)(a)},[]),(0,e.jsx)(ag,{...a,ref:g,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,A.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:(0,A.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,A.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),af=f.forwardRef((a,b)=>{let c=T(ac,a.__scopeDialog),d=f.useRef(!1),g=f.useRef(!1);return(0,e.jsx)(ag,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let e=b.target;c.triggerRef.current?.contains(e)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),ag=f.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:g,onCloseAutoFocus:h,...i}=a,j=T(ac,c),k=f.useRef(null),l=(0,B.useComposedRefs)(b,k);return(0,M.useFocusGuards)(),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(F.FocusScope,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:g,onUnmountAutoFocus:h,children:(0,e.jsx)(E.DismissableLayer,{role:"dialog",id:j.contentId,"aria-describedby":j.descriptionId,"aria-labelledby":j.titleId,"data-state":an(j.open),...i,ref:l,onDismiss:()=>j.onOpenChange(!1)})}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ar,{titleId:j.titleId}),(0,e.jsx)(as,{contentRef:k,descriptionId:j.descriptionId})]})]})}),ah="DialogTitle",ai=f.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,f=T(ah,c);return(0,e.jsx)(L.h2,{id:f.titleId,...d,ref:b})});ai.displayName=ah;var aj="DialogDescription",ak=f.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,f=T(aj,c);return(0,e.jsx)(L.p,{id:f.descriptionId,...d,ref:b})});ak.displayName=aj;var al="DialogClose",am=f.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,f=T(al,c);return(0,e.jsx)(L.button,{type:"button",...d,ref:b,onClick:(0,A.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})});function an(a){return a?"open":"closed"}am.displayName=al;var ao="DialogTitleWarning",[ap,aq]=(d={contentName:ac,titleName:ah,docsSlug:"dialog"},b=f.createContext(d),(c=a=>{let{children:c,...d}=a,g=f.useMemo(()=>d,Object.values(d));return(0,e.jsx)(b.Provider,{value:g,children:c})}).displayName=ao+"Provider",[c,function(a){let c=f.useContext(b);if(c)return c;if(void 0!==d)return d;throw Error(`\`${a}\` must be used within \`${ao}\``)}]),ar=({titleId:a})=>{let b=aq(ao),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return f.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},as=({contentRef:a,descriptionId:b})=>{let c=aq("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return f.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null};let at=(0,m.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),au=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(_,{ref:c,className:(0,v.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));au.displayName=_.displayName;let av=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(Z,{children:[(0,e.jsx)(au,{}),(0,e.jsxs)(ad,{ref:d,className:(0,v.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,e.jsxs)(am,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,e.jsx)(at,{className:"h-4 w-4"}),(0,e.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));av.displayName=ad.displayName;let aw=({className:a,...b})=>(0,e.jsx)("div",{className:(0,v.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});aw.displayName="DialogHeader";let ax=({className:a,...b})=>(0,e.jsx)("div",{className:(0,v.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});ax.displayName="DialogFooter";let ay=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(ai,{ref:c,className:(0,v.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));ay.displayName=ai.displayName;let az=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(ak,{ref:c,className:(0,v.cn)("text-sm text-muted-foreground",a),...b}));az.displayName=ak.displayName;var aA=a.i(30553),aB="horizontal",aC=["horizontal","vertical"],aD=f.forwardRef((a,b)=>{var c;let{decorative:d,orientation:f=aB,...g}=a,h=(c=f,aC.includes(c))?f:aB;return(0,e.jsx)(aA.Primitive.div,{"data-orientation":h,...d?{role:"none"}:{"aria-orientation":"vertical"===h?h:void 0,role:"separator"},...g,ref:b})});aD.displayName="Separator";let aE=f.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...d},f)=>(0,e.jsx)(aD,{ref:f,decorative:c,orientation:b,className:(0,v.cn)("shrink-0 bg-border","horizontal"===b?"h-px w-full":"h-full w-px",a),...d}));aE.displayName=aD.displayName;var aF=a.i(37464),aG=a.i(59138),aH=a.i(23292),aI=a.i(96221);let aJ=(0,m.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),aK=["Jency","Miguel","Valeria"],aL=["Pendiente","Asignado","Atendido"];function aM({query:a,onClose:b}){let c=(0,j.useFirestore)(),[d,g]=f.useState(null),[h,k]=f.useState(!0),[l,m]=f.useState(!1),[n,o]=f.useState(a.asignadoA||""),[p,q]=f.useState(a.status),[r,s]=f.useState(a.observacion||"");f.useEffect(()=>{(async()=>{if(c&&a.userId)try{let b=await (0,i.getDoc)((0,i.doc)(c,"users",a.userId));b.exists()&&g(b.data())}catch(a){console.error("Error fetching user details:",a)}k(!1)})()},[c,a.userId]);let t=async()=>{m(!0);try{let d=(0,i.doc)(c,"queries",a.id);await (0,i.updateDoc)(d,{asignadoA:n,status:p,observacion:r,fechaActualizacion:new Date().toISOString()}),aH.toast.success("Consulta actualizada con éxito"),b()}catch(a){console.error("Error updating query:",a),aH.toast.error("Error al actualizar. Inténtelo de nuevo.")}m(!1)};return(0,e.jsx)(U,{open:!0,onOpenChange:b,children:(0,e.jsxs)(av,{className:"max-w-3xl",children:[(0,e.jsxs)(aw,{children:[(0,e.jsxs)(ay,{className:"flex items-center justify-between",children:[(0,e.jsxs)("span",{children:["Detalle de Consulta: ",a.expediente]}),(0,e.jsx)(u.Badge,{style:(0,v.getStatusStyles)(p),children:p})]}),(0,e.jsxs)(az,{children:["Fecha de Creación: ",new Date(a.fechaCreacion).toLocaleString()]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("h4",{className:"font-semibold",children:"Información del Establecimiento"}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Nombre:"})," ",a.nombreEstablecimiento]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Código:"})," ",a.codigoEstablecimiento||"N/A"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"RUC:"})," ",a.ruc||"N/A"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Email:"})," ",a.emailEstablecimiento]}),(0,e.jsx)(aE,{}),(0,e.jsx)("h4",{className:"font-semibold",children:"Detalles de la Consulta"}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Tema:"})," ",a.tema]}),a.descripcion&&(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Descripción:"})," ",a.descripcion]})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("h4",{className:"font-semibold",children:"Información del Solicitante"}),h?(0,e.jsx)("p",{children:"Cargando..."}):d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Nombre:"})," ",d.nombres," ",d.apellidos]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"DNI:"})," ",a.userId]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Email:"})," ",d.email]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Celular:"})," ",d.celular]})]}):(0,e.jsx)("p",{children:"No se encontró al usuario."}),(0,e.jsx)(aE,{}),(0,e.jsx)("h4",{className:"font-semibold",children:"Gestión de la Consulta"}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(aN,{children:"Asignar a:"}),(0,e.jsxs)(aG.Select,{onValueChange:o,defaultValue:n,children:[(0,e.jsx)(aG.SelectTrigger,{children:(0,e.jsx)(aG.SelectValue,{placeholder:"Seleccionar personal"})}),(0,e.jsx)(aG.SelectContent,{children:aK.map(a=>(0,e.jsx)(aG.SelectItem,{value:a,children:a},a))})]})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(aN,{children:"Cambiar Estado:"}),(0,e.jsxs)(aG.Select,{onValueChange:q,defaultValue:p,children:[(0,e.jsx)(aG.SelectTrigger,{children:(0,e.jsx)(aG.SelectValue,{placeholder:"Seleccionar estado"})}),(0,e.jsx)(aG.SelectContent,{children:aL.map(a=>(0,e.jsx)(aG.SelectItem,{value:a,children:a},a))})]})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(aN,{children:"Observaciones Internas:"}),(0,e.jsx)(aF.Textarea,{value:r,onChange:a=>s(a.target.value),placeholder:"Añadir observaciones..."})]})]})]}),(0,e.jsxs)(ax,{children:[(0,e.jsx)(z.Button,{variant:"outline",onClick:b,children:"Cancelar"}),(0,e.jsxs)(z.Button,{onClick:t,disabled:l,children:[l?(0,e.jsx)(aI.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,e.jsx)(aJ,{className:"mr-2 h-4 w-4"}),"Guardar Cambios"]})]})]})})}function aN({children:a}){return(0,e.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:a})}function aO(){let a=(0,j.useFirestore)(),[b,c]=f.useState([]),[d,g]=f.useState(!0),[h,k]=f.useState("all"),[m,n]=f.useState(""),[o,p]=f.useState(null);f.useEffect(()=>{if(!a)return;let b=(0,i.query)((0,i.collection)(a,"queries"),(0,i.orderBy)("fechaCreacion","desc")),d=(0,i.onSnapshot)(b,a=>{c(a.docs.map(a=>({id:a.id,...a.data()}))),g(!1)},a=>{console.error("Error fetching queries:",a),g(!1)});return()=>d()},[a]);let q=f.useMemo(()=>b.filter(a=>"all"===h||a.status.toLowerCase()===h).filter(a=>{let b=m.toLowerCase();return a.expediente.toLowerCase().includes(b)||a.nombreEstablecimiento.toLowerCase().includes(b)}),[b,h,m]);return d?(0,e.jsx)(l.Skeleton,{className:"h-96 w-full"}):(0,e.jsxs)("div",{className:"border rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,e.jsxs)("div",{className:"p-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,e.jsx)(w.Input,{placeholder:"Buscar por expediente o establecimiento...",value:m,onChange:a=>n(a.target.value),className:"max-w-sm"}),(0,e.jsx)(x.Tabs,{value:h,onValueChange:k,className:"w-full sm:w-auto",children:(0,e.jsxs)(x.TabsList,{className:"grid w-full grid-cols-4",children:[(0,e.jsx)(x.TabsTrigger,{value:"all",children:"Todos"}),(0,e.jsx)(x.TabsTrigger,{value:"pendiente",children:"Pendientes"}),(0,e.jsx)(x.TabsTrigger,{value:"asignado",children:"Asignados"}),(0,e.jsx)(x.TabsTrigger,{value:"atendido",children:"Atendidos"})]})})]}),(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)(t.Table,{children:[(0,e.jsx)(t.TableHeader,{children:(0,e.jsxs)(t.TableRow,{children:[(0,e.jsx)(t.TableHead,{children:"Expediente"}),(0,e.jsx)(t.TableHead,{children:"Establecimiento"}),(0,e.jsx)(t.TableHead,{children:"Tema"}),(0,e.jsx)(t.TableHead,{children:"Fecha"}),(0,e.jsx)(t.TableHead,{children:"Estado"}),(0,e.jsx)(t.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,e.jsx)(t.TableBody,{children:q.map(a=>(0,e.jsxs)(t.TableRow,{children:[(0,e.jsx)(t.TableCell,{className:"font-medium",children:a.expediente}),(0,e.jsx)(t.TableCell,{children:a.nombreEstablecimiento}),(0,e.jsx)(t.TableCell,{children:a.tema}),(0,e.jsx)(t.TableCell,{children:new Date(a.fechaCreacion).toLocaleDateString()}),(0,e.jsx)(t.TableCell,{children:(0,e.jsx)(u.Badge,{style:(0,v.getStatusStyles)(a.status),children:a.status})}),(0,e.jsx)(t.TableCell,{className:"text-right",children:(0,e.jsx)(z.Button,{variant:"ghost",size:"icon",onClick:()=>{p(a)},children:(0,e.jsx)(y,{className:"h-4 w-4"})})})]},a.id))})]})}),o&&(0,e.jsx)(aM,{query:o,onClose:()=>{p(null)}})]})}var aP=a.i(30617);function aQ(){let{user:a,loading:b}=(0,h.useUser)(),c=(0,g.useRouter)();return(f.useEffect(()=>{b||a||c.push("/admin/login")},[a,b,c]),b||!a)?(0,e.jsxs)("div",{className:"space-y-8 w-full",children:[(0,e.jsxs)("div",{className:"bg-primary-pattern text-primary-foreground p-4 rounded-lg shadow-md flex items-center gap-4",children:[(0,e.jsx)(aP.LayoutDashboard,{className:"h-8 w-8"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-3xl font-bold font-headline tracking-tight",children:"Panel de Administración"}),(0,e.jsx)("p",{className:"text-primary-foreground/80",children:"Cargando datos del sistema..."})]})]}),(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,e.jsx)(l.Skeleton,{className:"h-28"}),(0,e.jsx)(l.Skeleton,{className:"h-28"}),(0,e.jsx)(l.Skeleton,{className:"h-28"}),(0,e.jsx)(l.Skeleton,{className:"h-28"})]}),(0,e.jsx)(l.Skeleton,{className:"h-96"})]}):(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsxs)("div",{className:"bg-primary-pattern text-primary-foreground p-4 rounded-lg shadow-md flex items-center gap-4",children:[(0,e.jsx)(aP.LayoutDashboard,{className:"h-8 w-8"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-3xl font-bold font-headline tracking-tight",children:"Panel de Administración"}),(0,e.jsx)("p",{className:"text-primary-foreground/80",children:"Gestione y monitoree todas las consultas del sistema."})]})]}),(0,e.jsx)(r,{}),(0,e.jsx)(aO,{})]})}a.s(["default",()=>aQ],74820)}];

//# sourceMappingURL=app_admin_page_jsx_599bf428._.js.map