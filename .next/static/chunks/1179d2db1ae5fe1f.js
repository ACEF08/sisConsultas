(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},16142,e=>{"use strict";let t,s;var a,r=e.i(43476),l=e.i(71645),n=e.i(18566),i=e.i(99009);e.i(36180);var o=e.i(17875),d=e.i(20246),c=e.i(65828),u=e.i(12586),p=e.i(75254);let m=(0,p.default)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]),h=(0,p.default)("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]),x=(0,p.default)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),f=(0,p.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function g(){let e=(0,d.useFirestore)(),[t,s]=l.useState({total:0,pendientes:0,asignadas:0,atendidas:0}),[a,n]=l.useState(!0);return(l.useEffect(()=>{if(!e)return;let t=(0,o.onSnapshot)((0,o.collection)(e,"queries"),e=>{let t=0,a=0,r=0,l=0;e.forEach(e=>{let s=e.data();switch(t++,s.status){case"Pendiente":a++;break;case"Asignado":r++;break;case"Atendido":l++}}),s({total:t,pendientes:a,asignadas:r,atendidas:l}),n(!1)});return()=>t()},[e]),a)?(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(u.Skeleton,{className:"h-28"}),(0,r.jsx)(u.Skeleton,{className:"h-28"}),(0,r.jsx)(u.Skeleton,{className:"h-28"}),(0,r.jsx)(u.Skeleton,{className:"h-28"})]}):(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(j,{icon:(0,r.jsx)(m,{}),title:"Consultas Totales",value:t.total}),(0,r.jsx)(j,{icon:(0,r.jsx)(h,{}),title:"Consultas Pendientes",value:t.pendientes}),(0,r.jsx)(j,{icon:(0,r.jsx)(f,{}),title:"Consultas Asignadas",value:t.asignadas}),(0,r.jsx)(j,{icon:(0,r.jsx)(x,{}),title:"Consultas Atendidas",value:t.atendidas})]})}function j({icon:e,title:t,value:s}){return(0,r.jsxs)(c.Card,{children:[(0,r.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(c.CardTitle,{className:"text-sm font-medium",children:t}),e]}),(0,r.jsx)(c.CardContent,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:s})})]})}var y=e.i(18746),v=e.i(99010),b=e.i(57851),N=e.i(76644),C=e.i(55118);let w=(0,p.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var S=e.i(54469),k=e.i(81140),R=e.i(20783),D=e.i(10772),E=e.i(69340),T=e.i(26330),I=e.i(65491),P=e.i(74606),A=e.i(96626);function O(e){var t;let s,a=(t=e,(s=l.forwardRef((e,t)=>{let{children:s,...a}=e;if(l.isValidElement(s)){var r;let e,n,i=(r=s,(n=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(n=(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref),o=function(e,t){let s={...t};for(let a in t){let r=e[a],l=t[a];/^on[A-Z]/.test(a)?r&&l?s[a]=(...e)=>{let t=l(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...l}:"className"===a&&(s[a]=[r,l].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==l.Fragment&&(o.ref=t?(0,R.composeRefs)(t,i):i),l.cloneElement(s,o)}return l.Children.count(s)>1?l.Children.only(null):null})).displayName=`${t}.SlotClone`,s),n=l.forwardRef((e,t)=>{let{children:s,...n}=e,i=l.Children.toArray(s),o=i.find(F);if(o){let e=o.props.children,s=i.map(t=>t!==o?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,r.jsx)(a,{...n,ref:t,children:l.isValidElement(e)?l.cloneElement(e,void 0,s):null})}return(0,r.jsx)(a,{...n,ref:t,children:s})});return n.displayName=`${e}.Slot`,n}e.i(74080);var M=Symbol("radix.slottable");function F(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===M}var _=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=O(`Primitive.${t}`),a=l.forwardRef((e,a)=>{let{asChild:l,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(l?s:t,{...n,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),H=e.i(3536),V=e.i(85369),z=e.i(86312),$="Dialog",[B,q]=function(e,t=[]){let s=[],a=()=>{let t=s.map(e=>l.createContext(e));return function(s){let a=s?.[e]||t;return l.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return a.scopeName=e,[function(t,a){let n=l.createContext(a),i=s.length;s=[...s,a];let o=t=>{let{scope:s,children:a,...o}=t,d=s?.[e]?.[i]||n,c=l.useMemo(()=>o,Object.values(o));return(0,r.jsx)(d.Provider,{value:c,children:a})};return o.displayName=t+"Provider",[o,function(s,r){let o=r?.[e]?.[i]||n,d=l.useContext(o);if(d)return d;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(a,...t)]}($),[L,W]=B($),U=e=>{let{__scopeDialog:t,children:s,open:a,defaultOpen:n,onOpenChange:i,modal:o=!0}=e,d=l.useRef(null),c=l.useRef(null),[u,p]=(0,E.useControllableState)({prop:a,defaultProp:n??!1,onChange:i,caller:$});return(0,r.jsx)(L,{scope:t,triggerRef:d,contentRef:c,contentId:(0,D.useId)(),titleId:(0,D.useId)(),descriptionId:(0,D.useId)(),open:u,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(e=>!e),[p]),modal:o,children:s})};U.displayName=$;var G="DialogTrigger";l.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,l=W(G,s),n=(0,R.useComposedRefs)(t,l.triggerRef);return(0,r.jsx)(_.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":em(l.open),...a,ref:n,onClick:(0,k.composeEventHandlers)(e.onClick,l.onOpenToggle)})}).displayName=G;var K="DialogPortal",[Z,J]=B(K,{forceMount:void 0}),Q=e=>{let{__scopeDialog:t,forceMount:s,children:a,container:n}=e,i=W(K,t);return(0,r.jsx)(Z,{scope:t,forceMount:s,children:l.Children.map(a,e=>(0,r.jsx)(A.Presence,{present:s||i.open,children:(0,r.jsx)(P.Portal,{asChild:!0,container:n,children:e})}))})};Q.displayName=K;var X="DialogOverlay",Y=l.forwardRef((e,t)=>{let s=J(X,e.__scopeDialog),{forceMount:a=s.forceMount,...l}=e,n=W(X,e.__scopeDialog);return n.modal?(0,r.jsx)(A.Presence,{present:a||n.open,children:(0,r.jsx)(et,{...l,ref:t})}):null});Y.displayName=X;var ee=O("DialogOverlay.RemoveScroll"),et=l.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,l=W(X,s);return(0,r.jsx)(V.RemoveScroll,{as:ee,allowPinchZoom:!0,shards:[l.contentRef],children:(0,r.jsx)(_.div,{"data-state":em(l.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),es="DialogContent",ea=l.forwardRef((e,t)=>{let s=J(es,e.__scopeDialog),{forceMount:a=s.forceMount,...l}=e,n=W(es,e.__scopeDialog);return(0,r.jsx)(A.Presence,{present:a||n.open,children:n.modal?(0,r.jsx)(er,{...l,ref:t}):(0,r.jsx)(el,{...l,ref:t})})});ea.displayName=es;var er=l.forwardRef((e,t)=>{let s=W(es,e.__scopeDialog),a=l.useRef(null),n=(0,R.useComposedRefs)(t,s.contentRef,a);return l.useEffect(()=>{let e=a.current;if(e)return(0,z.hideOthers)(e)},[]),(0,r.jsx)(en,{...e,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,k.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:(0,k.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:(0,k.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),el=l.forwardRef((e,t)=>{let s=W(es,e.__scopeDialog),a=l.useRef(!1),n=l.useRef(!1);return(0,r.jsx)(en,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||s.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let r=t.target;s.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),en=l.forwardRef((e,t)=>{let{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,...o}=e,d=W(es,s),c=l.useRef(null),u=(0,R.useComposedRefs)(t,c);return(0,H.useFocusGuards)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:(0,r.jsx)(T.DismissableLayer,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":em(d.open),...o,ref:u,onDismiss:()=>d.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eg,{titleId:d.titleId}),(0,r.jsx)(ej,{contentRef:c,descriptionId:d.descriptionId})]})]})}),ei="DialogTitle",eo=l.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,l=W(ei,s);return(0,r.jsx)(_.h2,{id:l.titleId,...a,ref:t})});eo.displayName=ei;var ed="DialogDescription",ec=l.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,l=W(ed,s);return(0,r.jsx)(_.p,{id:l.descriptionId,...a,ref:t})});ec.displayName=ed;var eu="DialogClose",ep=l.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,l=W(eu,s);return(0,r.jsx)(_.button,{type:"button",...a,ref:t,onClick:(0,k.composeEventHandlers)(e.onClick,()=>l.onOpenChange(!1))})});function em(e){return e?"open":"closed"}ep.displayName=eu;var eh="DialogTitleWarning",[ex,ef]=(a={contentName:es,titleName:ei,docsSlug:"dialog"},t=l.createContext(a),(s=e=>{let{children:s,...a}=e,n=l.useMemo(()=>a,Object.values(a));return(0,r.jsx)(t.Provider,{value:n,children:s})}).displayName=eh+"Provider",[s,function(e){let s=l.useContext(t);if(s)return s;if(void 0!==a)return a;throw Error(`\`${e}\` must be used within \`${eh}\``)}]),eg=({titleId:e})=>{let t=ef(eh),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},ej=({contentRef:e,descriptionId:t})=>{let s=ef("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return l.useEffect(()=>{let s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null};let ey=(0,p.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ev=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(Y,{ref:s,className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ev.displayName=Y.displayName;let eb=l.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(Q,{children:[(0,r.jsx)(ev,{}),(0,r.jsxs)(ea,{ref:a,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,r.jsxs)(ep,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(ey,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));eb.displayName=ea.displayName;let eN=({className:e,...t})=>(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});eN.displayName="DialogHeader";let eC=({className:e,...t})=>(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});eC.displayName="DialogFooter";let ew=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(eo,{ref:s,className:(0,b.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));ew.displayName=eo.displayName;let eS=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(ec,{ref:s,className:(0,b.cn)("text-sm text-muted-foreground",e),...t}));eS.displayName=ec.displayName;var ek=e.i(48425),eR="horizontal",eD=["horizontal","vertical"],eE=l.forwardRef((e,t)=>{var s;let{decorative:a,orientation:l=eR,...n}=e,i=(s=l,eD.includes(s))?l:eR;return(0,r.jsx)(ek.Primitive.div,{"data-orientation":i,...a?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...n,ref:t})});eE.displayName="Separator";let eT=l.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...a},l)=>(0,r.jsx)(eE,{ref:l,decorative:s,orientation:t,className:(0,b.cn)("shrink-0 bg-border","horizontal"===t?"h-px w-full":"h-full w-px",e),...a}));eT.displayName=eE.displayName;var eI=e.i(80736),eP=e.i(31597),eA=e.i(46696),eO=e.i(31278);let eM=(0,p.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),eF=["Jency","Miguel","Valeria"],e_=["Pendiente","Asignado","Atendido"];function eH({query:e,onClose:t}){let s=(0,d.useFirestore)(),[a,n]=l.useState(null),[i,c]=l.useState(!0),[u,p]=l.useState(!1),[m,h]=l.useState(e.asignadoA||""),[x,f]=l.useState(e.status),[g,j]=l.useState(e.observacion||"");l.useEffect(()=>{(async()=>{if(s&&e.userId)try{let t=await (0,o.getDoc)((0,o.doc)(s,"users",e.userId));t.exists()&&n(t.data())}catch(e){console.error("Error fetching user details:",e)}c(!1)})()},[s,e.userId]);let y=async()=>{p(!0);try{let a=(0,o.doc)(s,"queries",e.id);await (0,o.updateDoc)(a,{asignadoA:m,status:x,observacion:g,fechaActualizacion:new Date().toISOString()}),eA.toast.success("Consulta actualizada con éxito"),t()}catch(e){console.error("Error updating query:",e),eA.toast.error("Error al actualizar. Inténtelo de nuevo.")}p(!1)};return(0,r.jsx)(U,{open:!0,onOpenChange:t,children:(0,r.jsxs)(eb,{className:"max-w-3xl",children:[(0,r.jsxs)(eN,{children:[(0,r.jsxs)(ew,{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{children:["Detalle de Consulta: ",e.expediente]}),(0,r.jsx)(v.Badge,{style:(0,b.getStatusStyles)(x),children:x})]}),(0,r.jsxs)(eS,{children:["Fecha de Creación: ",new Date(e.fechaCreacion).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Información del Establecimiento"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Nombre:"})," ",e.nombreEstablecimiento]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Código:"})," ",e.codigoEstablecimiento||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"RUC:"})," ",e.ruc||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",e.emailEstablecimiento]}),(0,r.jsx)(eT,{}),(0,r.jsx)("h4",{className:"font-semibold",children:"Detalles de la Consulta"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Tema:"})," ",e.tema]}),e.descripcion&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Descripción:"})," ",e.descripcion]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Información del Solicitante"}),i?(0,r.jsx)("p",{children:"Cargando..."}):a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Nombre:"})," ",a.nombres," ",a.apellidos]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"DNI:"})," ",e.userId]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",a.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Celular:"})," ",a.celular]})]}):(0,r.jsx)("p",{children:"No se encontró al usuario."}),(0,r.jsx)(eT,{}),(0,r.jsx)("h4",{className:"font-semibold",children:"Gestión de la Consulta"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(eV,{children:"Asignar a:"}),(0,r.jsxs)(eP.Select,{onValueChange:h,defaultValue:m,children:[(0,r.jsx)(eP.SelectTrigger,{children:(0,r.jsx)(eP.SelectValue,{placeholder:"Seleccionar personal"})}),(0,r.jsx)(eP.SelectContent,{children:eF.map(e=>(0,r.jsx)(eP.SelectItem,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(eV,{children:"Cambiar Estado:"}),(0,r.jsxs)(eP.Select,{onValueChange:f,defaultValue:x,children:[(0,r.jsx)(eP.SelectTrigger,{children:(0,r.jsx)(eP.SelectValue,{placeholder:"Seleccionar estado"})}),(0,r.jsx)(eP.SelectContent,{children:e_.map(e=>(0,r.jsx)(eP.SelectItem,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(eV,{children:"Observaciones Internas:"}),(0,r.jsx)(eI.Textarea,{value:g,onChange:e=>j(e.target.value),placeholder:"Añadir observaciones..."})]})]})]}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(S.Button,{variant:"outline",onClick:t,children:"Cancelar"}),(0,r.jsxs)(S.Button,{onClick:y,disabled:u,children:[u?(0,r.jsx)(eO.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(eM,{className:"mr-2 h-4 w-4"}),"Guardar Cambios"]})]})]})})}function eV({children:e}){return(0,r.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})}function ez(){let e=(0,d.useFirestore)(),[t,s]=l.useState([]),[a,n]=l.useState(!0),[i,c]=l.useState("all"),[p,m]=l.useState(""),[h,x]=l.useState(null);l.useEffect(()=>{if(!e)return;let t=(0,o.query)((0,o.collection)(e,"queries"),(0,o.orderBy)("fechaCreacion","desc")),a=(0,o.onSnapshot)(t,e=>{s(e.docs.map(e=>({id:e.id,...e.data()}))),n(!1)},e=>{console.error("Error fetching queries:",e),n(!1)});return()=>a()},[e]);let f=l.useMemo(()=>t.filter(e=>"all"===i||e.status.toLowerCase()===i).filter(e=>{let t=p.toLowerCase();return e.expediente.toLowerCase().includes(t)||e.nombreEstablecimiento.toLowerCase().includes(t)}),[t,i,p]);return a?(0,r.jsx)(u.Skeleton,{className:"h-96 w-full"}):(0,r.jsxs)("div",{className:"border rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,r.jsxs)("div",{className:"p-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,r.jsx)(N.Input,{placeholder:"Buscar por expediente o establecimiento...",value:p,onChange:e=>m(e.target.value),className:"max-w-sm"}),(0,r.jsx)(C.Tabs,{value:i,onValueChange:c,className:"w-full sm:w-auto",children:(0,r.jsxs)(C.TabsList,{className:"grid w-full grid-cols-4",children:[(0,r.jsx)(C.TabsTrigger,{value:"all",children:"Todos"}),(0,r.jsx)(C.TabsTrigger,{value:"pendiente",children:"Pendientes"}),(0,r.jsx)(C.TabsTrigger,{value:"asignado",children:"Asignados"}),(0,r.jsx)(C.TabsTrigger,{value:"atendido",children:"Atendidos"})]})})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(y.Table,{children:[(0,r.jsx)(y.TableHeader,{children:(0,r.jsxs)(y.TableRow,{children:[(0,r.jsx)(y.TableHead,{children:"Expediente"}),(0,r.jsx)(y.TableHead,{children:"Establecimiento"}),(0,r.jsx)(y.TableHead,{children:"Tema"}),(0,r.jsx)(y.TableHead,{children:"Fecha"}),(0,r.jsx)(y.TableHead,{children:"Estado"}),(0,r.jsx)(y.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,r.jsx)(y.TableBody,{children:f.map(e=>(0,r.jsxs)(y.TableRow,{children:[(0,r.jsx)(y.TableCell,{className:"font-medium",children:e.expediente}),(0,r.jsx)(y.TableCell,{children:e.nombreEstablecimiento}),(0,r.jsx)(y.TableCell,{children:e.tema}),(0,r.jsx)(y.TableCell,{children:new Date(e.fechaCreacion).toLocaleDateString()}),(0,r.jsx)(y.TableCell,{children:(0,r.jsx)(v.Badge,{style:(0,b.getStatusStyles)(e.status),children:e.status})}),(0,r.jsx)(y.TableCell,{className:"text-right",children:(0,r.jsx)(S.Button,{variant:"ghost",size:"icon",onClick:()=>{x(e)},children:(0,r.jsx)(w,{className:"h-4 w-4"})})})]},e.id))})]})}),h&&(0,r.jsx)(eH,{query:h,onClose:()=>{x(null)}})]})}var e$=e.i(60289);function eB(){let{user:e,loading:t}=(0,i.useUser)(),s=(0,n.useRouter)();return(l.useEffect(()=>{t||e||s.push("/admin/login")},[e,t,s]),t||!e)?(0,r.jsxs)("div",{className:"space-y-8 w-full",children:[(0,r.jsxs)("div",{className:"bg-primary-pattern text-primary-foreground p-4 rounded-lg shadow-md flex items-center gap-4",children:[(0,r.jsx)(e$.LayoutDashboard,{className:"h-8 w-8"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-headline tracking-tight",children:"Panel de Administración"}),(0,r.jsx)("p",{className:"text-primary-foreground/80",children:"Cargando datos del sistema..."})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(u.Skeleton,{className:"h-28"}),(0,r.jsx)(u.Skeleton,{className:"h-28"}),(0,r.jsx)(u.Skeleton,{className:"h-28"}),(0,r.jsx)(u.Skeleton,{className:"h-28"})]}),(0,r.jsx)(u.Skeleton,{className:"h-96"})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-primary-pattern text-primary-foreground p-4 rounded-lg shadow-md flex items-center gap-4",children:[(0,r.jsx)(e$.LayoutDashboard,{className:"h-8 w-8"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-headline tracking-tight",children:"Panel de Administración"}),(0,r.jsx)("p",{className:"text-primary-foreground/80",children:"Gestione y monitoree todas las consultas del sistema."})]})]}),(0,r.jsx)(g,{}),(0,r.jsx)(ez,{})]})}e.s(["default",()=>eB],16142)}]);